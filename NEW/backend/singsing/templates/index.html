{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Singsino Admin</title>
  <link rel="stylesheet" href="{% static 'style.css' %}" />
  <style>
    body{display:grid;place-items:center;min-height:100vh;background:var(--bg);color:var(--ink);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .box{background:#fff;border:1px solid var(--line);border-radius:12px;padding:18px 20px;box-shadow:var(--shadow);text-align:center}
    .muted{color:#6b7280;font-size:12px;margin-top:6px}
    .btn{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:10px;background:var(--brand);color:#fff;text-decoration:none;font-weight:700}
  </style>
</head>
<body>
  <div class="box">
    <div style="font-weight:800;letter-spacing:.3px;margin-bottom:6px">Routing…</div>
    <div class="muted">If this doesn’t change, click below.</div>
    <a id="fallback" class="btn" href="login.html">Open Login</a>
  </div>

  <script>
    (function(){
      // 1) Allow deep-linking via ?page=...
      const params = new URLSearchParams(location.search);
      const page   = (params.get('page') || '').toLowerCase();

      const map = {
        dashboard: 'dashboard.html',
        indepth:   'indepth.html',
        products:  'products.html',
        promotions:'promotions.html',
        settings:  'settings.html',
        login:     'login.html',
        logout:    'logout.html'
      };

      const valid = new Set(Object.keys(map));

      function routeTo(href){
        document.getElementById('fallback').href = href;
        window.location.replace(href);
      }

      if (valid.has(page)) {
        routeTo(map[page]); return;
      }

      // 2) Resume last visited page if we have one
      const last = sessionStorage.getItem('lastPage');
      if (last && typeof last === 'string') {
        routeTo(last); return;
      }

      // 3) Default to login
      routeTo('login.html');
    })();
  </script>
</body>
</html>
